const imageRegistry = {
    gamepad: [
        "https://images.unsplash.com/photo-1592840496694-26d035b52b48?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1605901309584-818e25960b8f?auto=format&fit=crop&w=600&q=80"
    ],
    gaming_mouse: [
        "https://images.unsplash.com/photo-1615525902174-88aa38ba7325?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1629429408209-1f912961dbd8?auto=format&fit=crop&w=600&q=80"
    ],
    gaming_keyboard: [
        "https://images.unsplash.com/photo-1595225476474-87563907a212?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?auto=format&fit=crop&w=600&q=80"
    ],
    bluetooth_headphones: [
        "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1583394838336-acd9929a5f91?auto=format&fit=crop&w=600&q=80"
    ],
    wired_earphones: [
        "https://images.unsplash.com/photo-1524678606370-a47ad25cb82a?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1546435770-a3e4265da3ec?auto=format&fit=crop&w=600&q=80"
    ],
    wired_earphones_sony: [
        "https://images.unsplash.com/photo-1524678606370-a47ad25cb82a?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1613040809024-b4ef7ba99bc3?auto=format&fit=crop&w=600&q=80"
    ],
    wired_earphones_boat: [
        "https://images.unsplash.com/photo-1546435770-a3e4265da3ec?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1545645312-70669288eab3?auto=format&fit=crop&w=600&q=80"
    ],
    bluetooth_speaker: [
        "https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1589256469067-ea99122bbdc4?auto=format&fit=crop&w=600&q=80"
    ],
    soundbar: [
        "https://images.unsplash.com/photo-1545454675-3531b543be5d?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1558089687-db76e4b8b9f9?auto=format&fit=crop&w=600&q=80"
    ],
    home_theater: [
        "https://images.unsplash.com/photo-1574377586934-0f69a416c1ee?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1517245386807-6a161f36b8ad?auto=format&fit=crop&w=600&q=80"
    ],
    dslr_camera: [
        "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1502920917128-1aa500764cbd?auto=format&fit=crop&w=600&q=80"
    ],
    mirrorless_camera: [
        "https://images.unsplash.com/photo-1564466021-a2cd1e8609c1?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1617005082133-548c4dd27f35?auto=format&fit=crop&w=600&q=80"
    ],
    camera_tripod: [
        "https://images.unsplash.com/photo-1533038590840-1cde6e668a91?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1500634245200-e5245c7574ef?auto=format&fit=crop&w=600&q=80"
    ],
    drone: [
        "https://images.unsplash.com/photo-1473968512647-3e447244af8f?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1506947411487-a56738267384?auto=format&fit=crop&w=600&q=80"
    ],
    gimbal: [
        "https://images.unsplash.com/photo-1559128010-7c1ad6e1b6a5?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1504701954957-2010ec3bcec1?auto=format&fit=crop&w=600&q=80"
    ],
    action_camera: [
        "https://images.unsplash.com/photo-1565849904461-04a58ad377e0?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1588629738090-67a80b180630?auto=format&fit=crop&w=600&q=80"
    ],
    gaming_console: [
        "https://images.unsplash.com/photo-1606144042614-b2417e99c4e3?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1607853202273-797f1c22a38e?auto=format&fit=crop&w=600&q=80"
    ],
    xbox_console: [
        "https://images.unsplash.com/photo-1621259182978-fbf93132d53d?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1605901309584-818e25960b8f?auto=format&fit=crop&w=600&q=80"
    ],
    video_game: [
        "https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1511512578047-dfb367046420?auto=format&fit=crop&w=600&q=80"
    ],
    laptop: [
        "https://images.unsplash.com/photo-1611186871348-b1ce696e52c9?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1541807084-5c52b6b3adef?auto=format&fit=crop&w=600&q=80"
    ],
    gaming_laptop: [
        "https://images.unsplash.com/photo-1603302576837-37561b2e2302?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1593640408182-31c70c8268f5?auto=format&fit=crop&w=600&q=80"
    ],
    desktop_pc: [
        "https://images.unsplash.com/photo-1587831990711-23ca6441447b?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1527443154391-507e9dc6c5cc?auto=format&fit=crop&w=600&q=80"
    ],
    all_in_one_pc: [
        "https://images.unsplash.com/photo-1527443154391-507e9dc6c5cc?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1593640408182-31c70c8268f5?auto=format&fit=crop&w=600&q=80"
    ],
    mini_pc: [
        "https://images.unsplash.com/photo-1525547719571-a2d4ac8945e2?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1629131726692-1accd0c53ce0?auto=format&fit=crop&w=600&q=80"
    ],
    smart_watch: [
        "https://images.unsplash.com/photo-1546868871-7041f2a55e12?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1551816230-ef5deaed4a26?auto=format&fit=crop&w=600&q=80"
    ],
    smart_band: [
        "https://images.unsplash.com/photo-1508685096489-7aacd43bd3b1?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1576243345690-4e4b79b63288?auto=format&fit=crop&w=600&q=80"
    ],
    fitness_tracker: [
        "https://images.unsplash.com/photo-1558229868-b7c1266e746a?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1575311373937-040b8e1fd5b6?auto=format&fit=crop&w=600&q=80"
    ],
    smart_glasses: [
        "https://images.unsplash.com/photo-1572635196237-14b3f281503f?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1625900508535-905187768d71?auto=format&fit=crop&w=600&q=80"
    ],
    smart_ring: [
        "https://images.unsplash.com/photo-1627885408994-3532af103f6f?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1599643478518-17488fbbcd75?auto=format&fit=crop&w=600&q=80"
    ],
    smartphone: [
        "https://images.unsplash.com/photo-1592899677977-9c10ca588bbd?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1610945415295-d9bbf067e59c?auto=format&fit=crop&w=600&q=80"
    ],
    tablet: [
        "https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1561154464-82e9adf32764?auto=format&fit=crop&w=600&q=80"
    ],
    smart_tv: [
        "https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1552282366-f482d0263345?auto=format&fit=crop&w=600&q=80"
    ],
    mens_tshirt: [
        "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?auto=format&fit=crop&w=600&q=80"
    ],
    mens_shirt: [
        "https://images.unsplash.com/photo-1620012253295-c15cc3e65df4?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1596755094514-f87e34085b2c?auto=format&fit=crop&w=600&q=80"
    ],
    womens_kurta: [
        "https://images.unsplash.com/photo-1629161245084-2975949d2121?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1629161244463-71a7d6560960?auto=format&fit=crop&w=600&q=80"
    ],
    saree: [
        "https://images.unsplash.com/photo-1610030469983-98e550d6193c?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1617627143750-d86bc21e42bb?auto=format&fit=crop&w=600&q=80"
    ],
    running_shoes: [
        "https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1605348532760-6753d2c43329?auto=format&fit=crop&w=600&q=80"
    ],
    formal_shoes: [
        "https://images.unsplash.com/photo-1614252369475-531eba835eb1?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1533867617858-e7b97e060509?auto=format&fit=crop&w=600&q=80"
    ],
    heels: [
        "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1535043934128-cf0b28d52f95?auto=format&fit=crop&w=600&q=80"
    ],
    sneakers: [
        "https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1560769629-975ec94e6a86?auto=format&fit=crop&w=600&q=80"
    ],
    kids_clothing: [
        "https://images.unsplash.com/photo-1519457431-44ccd64a579b?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1519238263496-6362d7e3a1cf?auto=format&fit=crop&w=600&q=80"
    ],
    bedsheet: [
        "https://images.unsplash.com/photo-1522771753035-1a5b65dd9f24?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1629198688000-71f23e745b6e?auto=format&fit=crop&w=600&q=80"
    ],
    mattress: [
        "https://images.unsplash.com/photo-1631049307264-da0ec9d70304?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1505693314120-0d443867891c?auto=format&fit=crop&w=600&q=80"
    ],
    sofa: [
        "https://images.unsplash.com/photo-1555041469-a586c61ea9bc?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1493663284031-b7e3aefcae8e?auto=format&fit=crop&w=600&q=80"
    ],
    pressure_cooker: [
        "https://images.unsplash.com/photo-1584990761913-b4c6e2e8e122?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1594385208974-2e75f9d2bb42?auto=format&fit=crop&w=600&q=80"
    ],
    led_bulb: [
        "https://images.unsplash.com/photo-1493612276216-9c7837066c9d?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1550989460-0adf9ea622e2?auto=format&fit=crop&w=600&q=80"
    ],
    duffle_bag: [
        "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1590874103328-eac38a683ce7?auto=format&fit=crop&w=600&q=80"
    ],
    tote_bag: [
        "https://images.unsplash.com/photo-1594223274512-ad4803739b7c?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1584917865442-de89df76afd3?auto=format&fit=crop&w=600&q=80"
    ],
    backpack: [
        "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1581605405669-fcdf81165afa?auto=format&fit=crop&w=600&q=80"
    ],
    hiking_bag: [
        "https://images.unsplash.com/photo-1622260614153-03223fb72052?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?auto=format&fit=crop&w=600&q=80"
    ],
    placeholder: [
        "https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&w=600&q=80"
    ]
};

const getImagesForProductType = (productType, brand) => {
    if (productType === 'wired_earphones' && brand) {
        const brandKey = `wired_earphones_${brand.toLowerCase().replace(/\s+/g, '_')}`;
        if (imageRegistry[brandKey]) {
            return imageRegistry[brandKey];
        }
    }

    if (productType && imageRegistry[productType]) {
        return imageRegistry[productType];
    }
    console.warn(`Image registry mismatch: productType "${productType}" not found. Using placeholder.`);
    return imageRegistry.placeholder;
};

const resolveProductImages = (product) => {
    if (!product) return product;
    const productType = product.productType;
    const brand = product.brand;
    const images = getImagesForProductType(productType, brand);
    return {
        ...product,
        images: images.map((url, index) => ({
            url: url,
            public_id: `registry_${productType || 'placeholder'}_${index}`
        }))
    };
};

const resolveProductImagesFromDoc = (productDoc) => {
    if (!productDoc) return productDoc;
    const productObj = productDoc.toObject ? productDoc.toObject() : productDoc;
    return resolveProductImages(productObj);
};

module.exports = {
    imageRegistry,
    getImagesForProductType,
    resolveProductImages,
    resolveProductImagesFromDoc
};
